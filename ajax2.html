<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 
        1. 创建ajax， 核心对象XMLHttoRequest
        2. 发送请求 open（‘请求方式’， “请求地址”，是否异步）
        3. 发送请求参数 参数的格式一定是key = value形式的字符串，多个参数以&连接
            get： 参数写在请求地址后面，以？连接。
        4. 接收响应
            readyState（请求的状态）： 0（尚未初始化） 1 （正在发送请求） 2 （请求完毕） 3（正在响应） 4（响应完毕）
            status（服务器端返回的状态码，404 200（ok） 500（服务器端错误） 301 304
            onreadystatechange
            responseText： 获取来自服务器端端文本数据
        5. get/post 请求的区别
            （1） 请求参数位置不同
            （2） post请求需要设置请求头
            （3）get 的参数会显示在地址栏里，但post不会
            （4）get请求更快更简单
            （5）get有参数数量的限制，post没有参数数量的限制
            （6）post更安全更稳定
        6.json:
            JSON.parse(): 将json格式字符串转成对象。/json



     -->

    <script>
        
        var txt =document.getElementById('txt')
        var like = document.getElementById('like')
        
        like.onblur = function(){
            //1. 创建ajax核心对象
            var xmlhttp = new XMLHttpRequest();
            //2. 创建请求get/post
            xmlhttp.open('post','my.php',true);

            //如果请求方式为post，我们需要主动设置请求头
            xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');

            //3. 发送请求参数(post)
            xmlhttp.send('hobby=' + like.value)
            //4. 接收响应
            xmlhttp.onreadystatechange = function(){
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200 ) {
                    var data = xmlhttp.responseText
                    data = JSON.parse(data);

                    //dom操作

                    console.log(data)
                }
            }
        }
    </script>
    
</body>
</html>